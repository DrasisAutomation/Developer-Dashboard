<!DOCTYPE html>
<html>
<head>
<title>Admin Key Generator</title>
<style>
body { font-family: Arial; padding: 20px; }
button { padding: 10px 20px; margin-top: 10px; }
</style>
</head>
<body>

<h2>Room Key Generator</h2>

<select id="roomSelect">
</select>

<button onclick="generateKey()">Generate Key</button>

<h3>New Key:</h3>
<div id="keyBox" style="font-size:22px; font-weight:bold;"></div>

<script>
const ws = new WebSocket("https://developer-dashboard-n62d.onrender.com");

ws.onopen = () => console.log("Admin connected");

ws.onmessage = (msg) => {
    const data = JSON.parse(msg.data);

    if (data.type === "admin-confirm") {
        document.getElementById("keyBox").textContent = data.key;
    }
};

// Populate rooms 201 â†’ 230
const roomSelect = document.getElementById("roomSelect");
for (let r = 201; r <= 230; r++) {
    const opt = document.createElement("option");
    opt.value = r;
    opt.textContent = "Room " + r;
    roomSelect.appendChild(opt);
}

function generateKey() {
    const room = roomSelect.value;
    ws.send(JSON.stringify({
        type: "generate-key",
        room: room
    }));
}
</script>

</body>
</html>
