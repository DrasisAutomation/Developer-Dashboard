<!DOCTYPE html>
<html>
<head>
<title>Admin | Generate Room Key</title>
<style>
body {
    font-family: Arial;
    padding: 20px;
}
button {
    padding: 12px 20px;
    font-size: 16px;
    margin-top: 10px;
}
#keyBox {
    margin-top: 15px;
    font-size: 24px;
    font-weight: bold;
}
</style>
</head>
<body>

<h2>Room Key Generator</h2>

<label>Choose Room:</label><br>
<select id="roomSelect" style="padding:8px; font-size:16px;">
</select>

<br><br>

<button onclick="generateKey()">Generate Key</button>

<h3>Generated Key:</h3>
<div id="keyBox">--</div>

<script>
const ws = new WebSocket("ws://localhost:8080");

// Fill dropdown rooms 201 â†’ 230
const select = document.getElementById("roomSelect");
for (let r = 201; r <= 230; r++) {
    let opt = document.createElement("option");
    opt.value = r;
    opt.textContent = "Room " + r;
    select.appendChild(opt);
}

// When Admin receives confirmation
ws.onmessage = msg => {
    const data = JSON.parse(msg.data);

    if (data.type === "admin-confirm") {
        document.getElementById("keyBox").textContent = data.key;
    }
};

function generateKey() {
    const room = select.value;

    ws.send(JSON.stringify({
        type: "generate-key",
        room: room
    }));
}
</script>

</body>
</html>
